"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[854],{8854:function(e,s,t){t.r(s),t.d(s,{default:function(){return V}});var i=t(5671),o=t(3144),r=t(136),n=t(2882),a=t(2791),l=t(885),u="ProfileInfo_descriptionBlock__7iw08",c="ProfileInfo_mainPhoto__xeWV1",d="ProfileInfo_button__UZKZB",h="ProfileInfo_contact__-w3ZB",f=t(6443),p=t(184),x=function(e){var s=(0,a.useState)(!1),t=(0,l.Z)(s,2),i=t[0],o=t[1],r=(0,a.useState)(e.status),n=(0,l.Z)(r,2),u=n[0],c=n[1];(0,a.useEffect)((function(){c(e.status)}),[e.status]);return(0,p.jsxs)(p.Fragment,{children:[!i&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Status:"})," ",(0,p.jsx)("span",{onDoubleClick:function(){o(!0)},children:e.status||"---"})]}),i&&(0,p.jsx)("div",{children:(0,p.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),e.updateStatus(u)},value:u})})]})},j=t(3556),m=t(6139),v=t(704),b=t(8918),g=t(9234),P=(0,v.Z)({form:"edit-profile"})((function(e){return(0,p.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"save"})}),e.error&&(0,p.jsx)("div",{className:g.Z.formSummaryError,children:e.error}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name"}),": ",(0,p.jsx)(m.Z,{placeholder:"Full name",name:"fullName",validate:[],component:b.I})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job"}),": ",(0,p.jsx)(m.Z,{placeholder:"",name:"lookingForAJob",validate:[],component:b.I,type:"checkbox"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills"}),": ",(0,p.jsx)(m.Z,{placeholder:"My professional skills",name:"lookingForAJobDescription",validate:[],component:b.g})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me"}),": ",(0,p.jsx)(m.Z,{placeholder:"About me",name:"aboutMe",validate:[],component:b.g})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.profile.contacts).map((function(e){return(0,p.jsx)("div",{className:h,children:(0,p.jsxs)("b",{children:[e,":",(0,p.jsx)(m.Z,{placeholder:e,name:"contacts."+e,validate:[],component:b.I})]})},e)}))]})]})})),_=t(3923),k=function(e){var s=(0,_.CG)((function(e){return e.profilePage.profile})),t=(e.profile.contacts,Object.keys(e.profile.contacts));t.map((function(s){return(0,p.jsx)(Z,{contactTitle:s,contactValue:e.profile.contacts[s]},s)}));return(0,p.jsxs)("div",{children:[e.isOwner&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:e.goToEditMode,children:"edit"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name"}),": ",s.fullName]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job"}),": ",e.profile.lookingForAJob?"yes":"no"]}),e.profile.lookingForAJob&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills"}),": ",e.profile.lookingForAJobDescription]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me"}),": ",e.profile.aboutMe]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts"}),":",t]})]})},Z=function(e){return(0,p.jsxs)("div",{className:h,children:[(0,p.jsx)("b",{children:e.contactTitle}),": ",e.contactValue]})},y=function(e){var s=(0,a.useState)(!1),t=(0,l.Z)(s,2),i=t[0],o=t[1];if(!e.profile)return(0,p.jsx)(f.Z,{});return(0,p.jsx)("div",{children:(0,p.jsx)("div",{className:u,children:(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{src:e.profile.photos.large||j,className:c}),e.isOwner&&(0,p.jsx)("label",{htmlFor:"load_avatar",children:(0,p.jsx)("div",{className:d,children:"image"})}),(0,p.jsx)("input",{id:"load_avatar",hidden:!0,type:"file",onChange:function(s){var t=s.currentTarget.files;t&&t.length&&e.savePhoto(t[0])}}),i?(0,p.jsx)(P,{initialValues:e.profile,profile:e.profile,onSubmit:function(s){e.saveProfile(s).then((function(){o(!1)}))}}):(0,p.jsx)(k,{goToEditMode:function(){o(!0)},profile:e.profile,isOwner:e.isOwner}),(0,p.jsx)(x,{status:e.status,updateStatus:e.updateStatus})]})})})},S="MyPosts_postsBlock__ACMDS",I="MyPosts_posts__9KRJd",M="Post_item__e9bws",w="Post_image__nLxM5",C=function(e){return(0,p.jsxs)("div",{className:M,children:[(0,p.jsx)("img",{className:w,alt:"logo",src:"https://images.unsplash.com/photo-1485178575877-1a13bf489dfe?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8Z2lybCUyMGxvZ298ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"}),e.message,(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:String.fromCodePoint(128151)})," ",e.likesCount]})]})},A=t(3079),F=(0,v.Z)({form:"ProfileAddNewPostForm"})((function(e){var s=(0,a.useMemo)((function(){return(0,A.D)(10)}),[]);return(0,p.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,p.jsx)("div",{children:(0,p.jsx)(m.Z,{component:b.g,name:"newPostText",placeholder:"Post Message",validate:[A.C,s]})}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Add post"})})]})})),N=a.memo((function(e){var s=e.posts.map((function(e){return(0,p.jsx)(C,{message:e.message,likesCount:e.likesCont},e.id)}));return(0,p.jsxs)("div",{className:S,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)(F,{onSubmit:function(s){e.addPost(s.newPostText)}}),(0,p.jsx)("div",{className:I,children:s})]})})),O=t(7375),D=t(81),T=(0,O.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(s){e((0,D.Wl)(s))}}}))(N),J=function(e){return(0,p.jsxs)("div",{children:[(0,p.jsx)(y,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,saveProfile:e.saveProfile,updateStatus:e.updateStatus}),(0,p.jsx)(T,{})]})},U=t(9723),B=t(7781),E=function(e){(0,r.Z)(t,e);var s=(0,n.Z)(t);function t(){var e;(0,i.Z)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).userId=null,e}return(0,o.Z)(t,[{key:"refreshProfile",value:function(){this.userId=this.props.match.params.userId,this.userId||(this.userId=String(this.props.authorizedUserId),this.userId||this.props.history.push("login")),this.props.getFriendsProfile(),this.props.getUserProfile(this.userId),this.props.getStatus(this.userId)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)("div",{children:(0,p.jsx)(J,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})})}}]),t}(a.Component),V=(0,B.qC)((0,O.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth,friends:e.profilePage.friends}}),{getUserProfile:D.et,getStatus:D.lR,updateStatus:D.Nf,getFriendsProfile:D._Z,savePhoto:D.Ju,saveProfile:D.Ii}),U.EN)(E)}}]);
//# sourceMappingURL=854.d260c874.chunk.js.map